import{j as e,w as Q,P as $,x as w,y as Y,z as O,A as P,D as Z,F as ee,H as se,J as D,K as te,N as re,O as ne,Q as j,R as I,U as F,B as R,G as oe,V as ae}from"./index-zfbuQlMo.js";import{C as ce}from"./check-CtRMqS6y.js";import{a as l,e as ie}from"./vendor-core-CjMAIzdp.js";import{u as le,F as de,a as L,b as B,c as T,d as A,e as M}from"./form-_rCilqGp.js";import"./vendor-utils-8S64T46y.js";import"./vendor-ui-bvpj1Elq.js";var y="Checkbox",[ue,Ne]=Q(y),[me,E]=ue(y);function pe(r){const{__scopeCheckbox:a,checked:s,children:m,defaultChecked:n,disabled:t,form:h,name:x,onCheckedChange:d,required:f,value:b="on",internal_do_not_use_render:o}=r,[p,c]=Y({prop:s,defaultProp:n??!1,onChange:d,caller:y}),[k,C]=l.useState(null),[v,i]=l.useState(null),u=l.useRef(!1),N=k?!!h||!!k.closest("form"):!0,S={checked:p,disabled:t,setChecked:c,control:k,setControl:C,name:x,form:h,value:b,hasConsumerStoppedPropagationRef:u,required:f,defaultChecked:g(n)?!1:n,isFormControl:N,bubbleInput:v,setBubbleInput:i};return e.jsx(me,{scope:a,...S,children:he(o)?o(S):m})}var q="CheckboxTrigger",z=l.forwardRef(({__scopeCheckbox:r,onKeyDown:a,onClick:s,...m},n)=>{const{control:t,value:h,disabled:x,checked:d,required:f,setControl:b,setChecked:o,hasConsumerStoppedPropagationRef:p,isFormControl:c,bubbleInput:k}=E(q,r),C=O(n,b),v=l.useRef(d);return l.useEffect(()=>{const i=t?.form;if(i){const u=()=>o(v.current);return i.addEventListener("reset",u),()=>i.removeEventListener("reset",u)}},[t,o]),e.jsx(w.button,{type:"button",role:"checkbox","aria-checked":g(d)?"mixed":d,"aria-required":f,"data-state":W(d),"data-disabled":x?"":void 0,disabled:x,value:h,...m,ref:C,onKeyDown:P(a,i=>{i.key==="Enter"&&i.preventDefault()}),onClick:P(s,i=>{o(u=>g(u)?!0:!u),k&&c&&(p.current=i.isPropagationStopped(),p.current||i.stopPropagation())})})});z.displayName=q;var G=l.forwardRef((r,a)=>{const{__scopeCheckbox:s,name:m,checked:n,defaultChecked:t,required:h,disabled:x,value:d,onCheckedChange:f,form:b,...o}=r;return e.jsx(pe,{__scopeCheckbox:s,checked:n,defaultChecked:t,disabled:x,required:h,onCheckedChange:f,name:m,form:b,value:d,internal_do_not_use_render:({isFormControl:p})=>e.jsxs(e.Fragment,{children:[e.jsx(z,{...o,ref:a,__scopeCheckbox:s}),p&&e.jsx(V,{__scopeCheckbox:s})]})})});G.displayName=y;var H="CheckboxIndicator",U=l.forwardRef((r,a)=>{const{__scopeCheckbox:s,forceMount:m,...n}=r,t=E(H,s);return e.jsx($,{present:m||g(t.checked)||t.checked===!0,children:e.jsx(w.span,{"data-state":W(t.checked),"data-disabled":t.disabled?"":void 0,...n,ref:a,style:{pointerEvents:"none",...r.style}})})});U.displayName=H;var K="CheckboxBubbleInput",V=l.forwardRef(({__scopeCheckbox:r,...a},s)=>{const{control:m,hasConsumerStoppedPropagationRef:n,checked:t,defaultChecked:h,required:x,disabled:d,name:f,value:b,form:o,bubbleInput:p,setBubbleInput:c}=E(K,r),k=O(s,c),C=Z(t),v=ee(m);l.useEffect(()=>{const u=p;if(!u)return;const N=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(N,"checked").set,X=!n.current;if(C!==t&&_){const J=new Event("click",{bubbles:X});u.indeterminate=g(t),_.call(u,g(t)?!1:t),u.dispatchEvent(J)}},[p,C,t,n]);const i=l.useRef(g(t)?!1:t);return e.jsx(w.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??i.current,required:x,disabled:d,name:f,value:b,form:o,...a,tabIndex:-1,ref:k,style:{...a.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});V.displayName=K;function he(r){return typeof r=="function"}function g(r){return r==="indeterminate"}function W(r){return g(r)?"indeterminate":r?"checked":"unchecked"}const xe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fe=se("loader-circle",xe);function be({className:r,...a}){return e.jsx(G,{"data-slot":"checkbox",className:D("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...a,children:e.jsx(U,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(ce,{className:"size-3.5"})})})}function Se({className:r,...a}){const{t:s}=te(),[m,n]=l.useState(!1),[t,h]=l.useState(!0),x=ie(),{loginState:d,setLoginState:f}=re(),b=ne(),o=le({defaultValues:{username:j[0].username,password:j[0].password}});if(d!==I.LOGIN)return null;const p=async c=>{n(!0);try{await b(c),x(oe.defaultRoute,{replace:!0}),ae.success(s("sys.login.loginSuccessTitle"),{closeButton:!0})}finally{n(!1)}};return e.jsx("div",{className:D("flex flex-col gap-6",r),children:e.jsx(de,{...o,...a,children:e.jsxs("form",{onSubmit:o.handleSubmit(p),className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s("sys.login.signInFormTitle")}),e.jsx("p",{className:"text-balance text-sm text-muted-foreground",children:s("sys.login.signInFormDescription")})]}),e.jsx(L,{control:o.control,name:"username",rules:{required:s("sys.login.accountPlaceholder")},render:({field:c})=>e.jsxs(B,{children:[e.jsx(T,{children:s("sys.login.userName")}),e.jsx(A,{children:e.jsx(F,{placeholder:j.map(k=>k.username).join("/"),...c})}),e.jsx(M,{})]})}),e.jsx(L,{control:o.control,name:"password",rules:{required:s("sys.login.passwordPlaceholder")},render:({field:c})=>e.jsxs(B,{children:[e.jsx(T,{children:s("sys.login.password")}),e.jsx(A,{children:e.jsx(F,{type:"password",placeholder:j[0].password,...c,suppressHydrationWarning:!0})}),e.jsx(M,{})]})}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{id:"remember",checked:t,onCheckedChange:c=>h(c==="indeterminate"?!1:c)}),e.jsx("label",{htmlFor:"remember",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:s("sys.login.rememberMe")})]}),e.jsx(R,{variant:"link",onClick:()=>f(I.RESET_PASSWORD),size:"sm",children:s("sys.login.forgetPassword")})]}),e.jsxs(R,{type:"submit",className:"w-full",children:[m&&e.jsx(fe,{className:"animate-spin mr-2"}),s("sys.login.loginButton")]}),e.jsxs("div",{className:"text-center text-sm",children:[s("sys.login.noAccount"),e.jsx(R,{variant:"link",className:"px-1",onClick:()=>f(I.REGISTER),children:s("sys.login.signUpFormTitle")})]})]})})})}export{Se as LoginForm,Se as default};
