import{a1 as K,bn as P,j as e,U as y,bj as z,bk as B,B as g,I as l,bl as V,bm as A,aa as f}from"./index-zfbuQlMo.js";import"./vendor-utils-8S64T46y.js";import{d as F,C as G,S as H,v as J,K as U}from"./kanban-task-qFQ3OHhQ.js";import{a as i}from"./vendor-core-CjMAIzdp.js";import{T as q}from"./task-detail-CHITnEvh.js";function Q(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,r)}function W(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,r)}var X=typeof window<"u",Y=X?window:null,k=function(t){return!!t.addEventListener},v=function(t){return!!t.on},Z=function(t,r,n,a){n===void 0&&(n=Y),i.useEffect(function(){if(r&&n)return k(n)?Q(n,t,r,a):v(n)&&n.on(t,r,a),function(){k(n)?W(n,t,r,a):v(n)&&n.off(t,r,a)}},[t,r,n,JSON.stringify(a)])};function $({id:t,column:r,tasks:n,createTask:a,clearColumn:p,deleteColumn:m,renameColumn:b,isDragging:j}){const{themeMode:T}=K(),{attributes:w,listeners:C,setNodeRef:S,transform:N,transition:E}=F({id:t}),I={transform:G.Transform.toString(N),transition:E,height:"100%",padding:"16px",borderRadius:"16px",backgroundColor:T===P.Light?"rgb(244, 246, 248)":"rgba(145, 158, 171, 0.12)",opacity:j?.5:1},L=[{key:"1",label:e.jsxs("div",{className:"flex items-center text-gray",onClick:()=>{u(!0)},onKeyDown:s=>{s.key==="Enter"&&u(!0)},children:[e.jsx(l,{icon:"solar:pen-bold"}),e.jsx("span",{className:"ml-2",children:"rename"})]})},{key:"2",label:e.jsxs("div",{className:"flex items-center text-gray",onClick:()=>p(r.id),onKeyDown:s=>{s.key==="Enter"&&p(r.id)},children:[e.jsx(l,{icon:"solar:eraser-bold"}),e.jsx("span",{className:"ml-2",children:"clear"})]})},{key:"3",label:e.jsxs("div",{className:"flex items-center text-warning",onClick:()=>m(r.id),onKeyDown:s=>{s.key==="Enter"&&m(r.id)},children:[e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),e.jsx("span",{className:"ml-2",children:"delete"})]})}],[D,x]=i.useState(!1),c=i.useRef(null);Z("click",s=>{if(c.current&&!c.current.contains(s.target)){const o=c.current.value;o&&a(r.id,{id:f.string.uuid(),title:o,reporter:f.image.avatarGitHub(),priority:f.helpers.enumValue(q)}),x(!1)}if(d.current&&!d.current.contains(s.target)){const o=d.current.value;o&&b({...r,title:o}),u(!1)}});const[M,u]=i.useState(!1),d=i.useRef(null),[O,h]=i.useState(!1),R=s=>{h(!1),s.domEvent.stopPropagation()};return e.jsxs("div",{ref:S,style:I,children:[e.jsxs("header",{...w,...C,className:"mb-4 flex select-none items-center justify-between text-base font-semibold",children:[M?e.jsx(y,{ref:d,autoFocus:!0}):r.title,e.jsxs(z,{open:O,onOpenChange:h,children:[e.jsx(B,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"text-gray!",children:e.jsx(l,{icon:"dashicons:ellipsis"})})}),e.jsx(V,{align:"end",children:L?.map(s=>s&&"key"in s&&"label"in s?e.jsx(A,{onClick:()=>R({key:s.key}),children:s.label},s.key):null)})]})]}),e.jsx(H,{items:n.map(s=>s.id),strategy:J,children:e.jsx("div",{className:"min-h-[10px]",children:n.map(s=>e.jsx(U,{id:s.id,task:s},s.id))})}),e.jsx("footer",{className:"w-[248px]",children:D?e.jsx(y,{ref:c,placeholder:"Task Name",autoFocus:!0}):e.jsxs(g,{onClick:s=>{s.stopPropagation(),x(!0)},className:"flex! items-center justify-center text-xs! font-medium! w-full",children:[e.jsx(l,{icon:"carbon:add",size:20}),e.jsx("span",{children:"Add Task"})]})})]})}const ae=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{$ as K,ae as k,Z as u};
